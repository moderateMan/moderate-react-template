## API
| a | b |
| - | - |
### PreviewLayout
| a | b |
| - | - |
| å‚æ•°     | è¯´æ˜                       | ç±»å‹ | é»˜è®¤å€¼ | ç‰ˆæœ¬  |
| :------- | :------------------------- | :--: | :----: | :---: |
| children | ä¼ é€’çš„ç»„ä»¶ï¼Œå¯ä»¥æ˜¯ä»»æ„ç»„ä»¶ | jsx  |  null  | 0.1.0 |

### MdPreviewer

| å‚æ•° | è¯´æ˜          |  ç±»å‹  | é»˜è®¤å€¼ | ç‰ˆæœ¬  |
| :--- | :------------ | :----: | :----: | :---: |
| md   | markdown æ–‡æ¡£ | string |  null  | 0.1.0 |

### CodePreviewer

| å‚æ•°     | è¯´æ˜           |  ç±»å‹  | é»˜è®¤å€¼ | ç‰ˆæœ¬  |
| :------- | :------------- | :----: | :----: | :---: |
| code     | è¦æ˜¾ç¤ºçš„ä»£ç    | string |  null  | 0.0.1 |
| showCode | æ˜¯å¦è¦å±•ç¤ºä»£ç  |  bool  |  true  | 0.1.0 |

<p align="center">
  <a href="https://github.com/uiwjs/react-markdown-editor/issues">
    <img src="https://img.shields.io/github/issues/uiwjs/react-markdown-editor.svg">
  </a>
  <a href="https://github.com/uiwjs/react-markdown-editor/network">
    <img src="https://img.shields.io/github/forks/uiwjs/react-markdown-editor.svg">
  </a>
  <a href="https://github.com/uiwjs/react-markdown-editor/stargazers">
    <img src="https://img.shields.io/github/stars/uiwjs/react-markdown-editor.svg">
  </a>
  <a href="https://github.com/uiwjs/react-markdown-editor/releases">
    <img src="https://img.shields.io/github/release/uiwjs/react-markdown-editor.svg">
  </a>
  <a href="https://www.npmjs.com/package/@uiw/react-markdown-editor">
    <img src="https://img.shields.io/npm/v/@uiw/react-markdown-editor.svg">
  </a>
</p>

<p align="center">
  A markdown editor with preview, implemented with React.js and TypeScript.
</p>

## Install

```bash
npm i @uiw/react-markdown-editor
```

## Document

Official document [demo preview](https://uiwjs.github.io/react-markdown-editor/) ([ğŸ‡¨ğŸ‡³ ä¸­å›½é•œåƒç½‘ç«™](http://uiw.gitee.io/react-markdown-editor/))

## Basic Usage

```jsx
import MarkdownEditor from "@uiw/react-markdown-editor";
import React from "react";
import ReactDOM from "react-dom";

const Dome = () => (
  <MarkdownEditor value={this.state.markdown} onChange={this.updateMarkdown} />
);
```

controlled usage

```jsx
import MarkdownEditor from "@uiw/react-markdown-editor";
import React from "react";
import ReactDOM from "react-dom";

class App extends React.Component {
  constructor() {
    super();
    this.state = {
      markdown: "# This is a H1  \n## This is a H2  \n###### This is a H6",
    };
    this.updateMarkdown = this.updateMarkdown.bind(this);
  }

  updateMarkdown(editor, data, value) {
    this.setState({ markdown: value });
  }

  render() {
    return (
      <MarkdownEditor
        value={this.state.markdown}
        onChange={this.updateMarkdown}
      />
    );
  }
}

ReactDOM.render(<App />, document.getElementById("app"));
```

## Props

- value (_string_) - the raw markdown that will be converted to html (**required**)
- `visble?:boolean` - Shows a preview that will be converted to html.
- `toolbars?:array` - Tool display settings.
- `toolbarsMode?:array` - Tool display settings.
- onChange (_function(editor: IInstance, data: CodeMirror.EditorChange, value: string)_) - called when a change is made (**required**)

> [Other Props Options](https://github.com/uiwjs/react-markdown-editor/blob/8de6abbf628b6d272d7da1c28e985fbbcba71b93/src/components/CodeMirror/index.tsx#L21-L60)

### Development

```bash
npm run dev
npm run type-check:watch
npm run doc
```

## License

[MIT Â© Kenny Wong](./LICENSE)

> this æ˜¯åœ¨è°ƒç”¨æ—¶è¢«ç»‘å®šçš„,å®Œå…¨å–å†³äºå‡½æ•°çš„è°ƒç”¨ä½ç½®(ä¹Ÿå°±æ˜¯å‡½æ•°çš„è°ƒç”¨æ–¹æ³•)

# 2.1 è°ƒç”¨ä½ç½®

å‡½æ•°åœ¨ä»£ç ä¸­è¢«è°ƒç”¨çš„ä½ç½®(è€Œä¸æ˜¯å£°æ˜çš„ä½ç½®)

æ‰¾è°ƒç”¨ä½ç½®å®é™…ä¸Šåœ¨æ‰¾â€œå‡½æ•°è¢«è°ƒç”¨çš„é—®é¢˜â€

é‚£å°±è¦åˆ†æè°ƒç”¨æ ˆ

# 2.2 ç»‘å®šè§„åˆ™

æ‰¾åˆ°äº†è°ƒç”¨ä½ç½®äº†å†é€šè¿‡`å››æ¡ç»‘å®š`è§„åˆ™æ¥åˆ¤æ–­ this çš„ç»‘å®šå¯¹è±¡ã€‚
å››æ¡ç»‘å®šï¼šé»˜è®¤ç»‘å®šï¼Œéšå¼ç»‘å®šï¼Œå¼ºåˆ¶ç»‘å®šï¼Œnew ç»‘å®šã€‚

## 2.2.1 é»˜è®¤ç»‘å®š

æ— æ³•åº”ç”¨å…¶ä»–è§„åˆ™æ—¶çš„é»˜è®¤è§„åˆ™ã€‚

---

> å£°æ˜åœ¨å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡(æ¯”å¦‚ var a = 2)å°±æ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªåŒåå±æ€§ã€‚å®ƒä»¬æœ¬è´¨ä¸Šå°±æ˜¯åŒä¸€ä¸ªä¸œè¥¿,å¹¶ä¸æ˜¯é€šè¿‡å¤åˆ¶å¾—åˆ°çš„,å°±åƒä¸€ä¸ªç¡¬å¸çš„ä¸¤é¢ä¸€æ ·ã€‚

èµ·åˆæˆ‘çœ‹è¿™å¥è¯è§‰å¾—æ˜¯åœ¨è¯´åºŸè¯ã€‚ã€‚ã€‚ï¼Œç°åœ¨çœ‹æ¥äº‹å®ä¸Šè¿™ä»¶äº‹ç¡®å®æ˜¯ä¸€ä»¶å€¼å¾—æ³¨æ„çš„ï¼Œæˆ‘å¿½ç•¥äº†ï¼Œä½œç”¨åŸŸå¯¹è±¡å±…ç„¶å’Œ window å±…ç„¶"é‡åˆ"äº†,ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œthis æŒ‡å‘çš„å¯¹è±¡æ˜¯ä¸èƒ½å’Œä½œç”¨åŸŸæ··æ·†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ æ— æ³•é€šè¿‡ this å¾—åˆ°ä½œç”¨åŸŸçš„ä¸­çš„å¯¹è±¡ï¼Œåˆ‡è®°ã€‚

---

å¦‚æœä½¿ç”¨ä¸¥æ ¼æ¨¡å¼(strict mode) ,é‚£ä¹ˆå…¨å±€å¯¹è±¡å°†æ— æ³•ä½¿ç”¨é»˜è®¤ç»‘å®š,å› æ­¤ this ä¼šç»‘å®šåˆ° undefinedã€‚
è¯´ä¸¥æ ¼æ¨¡å¼ï¼Œå®é™…ä¸Šç¡®åˆ‡çš„è®²æ˜¯é’ˆå¯¹çš„å‡½æ•°åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å°±è¡Œï¼Œï¼ˆè¿™ç§æƒ…å†µä¸å¸¸è§ï¼Œä¸€èˆ¬æ˜¯åœ¨å¼•å…¥çš„å…¶ä»–æ–¹åº“ï¼Œä¸¥æ ¼æƒ…å†µä¸ä¸€è‡´å¯¼è‡´ï¼‰

## 2.2.2 éšå¼ç»‘å®š

åˆ¤æ–­è°ƒç”¨ä½ç½®æ˜¯å¦æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯å¦è¢«æŸä¸ªå¯¹è±¡æ‹¥æœ‰æˆ–è€…åŒ…å«ã€‚

---

ä¸è¿‡è¿™ç§è¯´æ³•å¯èƒ½ä¼šé€ æˆä¸€äº›`è¯¯å¯¼`ã€‚

- è¯¯å¯¼ï¼š

```js
function foo() {
  console.log(this.a);
}
var obj = {
  a: 2,
  foo: foo,
};
obj.foo(); // 2
```

æ€è€ƒä¸€ä¸‹è¿™ä¸ª foo å’Œ obj çš„å…³ç³»ã€‚
ä¸¥æ ¼è®²æ— è®ºæ˜¯åœ¨ obj ä¸­å®šä¹‰è¿˜æ˜¯å…ˆå®šä¹‰å†æ·»åŠ ä¸ºå¼•ç”¨å±æ€§ï¼Œ
ä¸¥æ ¼è®²éƒ½ä¸å±äº obj çš„å¯¹è±¡ã€‚

_~`è¯¯å¯¼çš„æ„æ€æˆ‘è§‰å¾—æ˜¯æœ‰ä¸€ç§fooå®Œå…¨å±äºobjè¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡çš„é”™è§‰`~_

---

> å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰æœ€é¡¶å±‚æˆ–è€…è¯´æœ€åä¸€å±‚ä¼šå½±å“è°ƒç”¨ä½ç½®

è¿™å¥è¯ä¹Ÿå€¼å¾—æ¨æ•²ï¼Œç®€å•è®²å¦‚æœå¤šå±‚å¯¹è±¡åµŒå¥—äº†ï¼Œé‚£ä¹ˆéšå¼ç»‘å®šéµå¾ªçš„å°±æ˜¯å°±è¿‘åŸåˆ™ï¼Œç»‘å®šæœ€è¿‘çš„å¯¹è±¡

---

**éšå¼ä¸¢å¤±**ï¼šä¸¢å¤±ç»‘å®šå¯¹è±¡çš„æƒ…å†µä¼šå¾ˆå¸¸è§ï¼Œç„¶åå°±ä¼šä½¿ç”¨é»˜è®¤ç»‘å®šï¼ˆä¹Ÿå°±æ˜¯è¯´ä¼šç»‘å®šåˆ° window æˆ–è€… undifindï¼Œå–å†³äºæ˜¯å¦ä¸ºä¸¥æ ¼æ¨¡å¼ï¼‰
æ€è€ƒä¸‹é¢ä»£ç ï¼š

```html
<div>
  <section>asdasdasd</section>
</div>
```

```jsx
import { PreviewLayout } from "react-code-previewer";

<PreviewLayout>asdasdasd</PreviewLayout>;
```

```js
function foo() {
  console.log(this.a);
}
var obj = {
  a: 2,
  foo: foo,
};
var bar = obj.foo;
// å‡½æ•°åˆ«å!
var a = "oops, global";
// a æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§
bar();
// "oops, global"
```

ä¸»è¦çœ‹è¿™å¥

```js
var bar = obj.foo;
bar();
```

bar æ˜¯ obj.foo çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†å®é™…ä¸Šå¼•ç”¨æ˜¯ foo å‡½æ•°æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰è¿›è¡Œä»»ä½•ç»‘å®šæƒ…å†µçš„ä¸‹çš„å‡½æ•°ï¼Œé‚£ä¹ˆè¿™æ ·çš„"å¹²å‡€"çš„å‡½æ•°è¢«è°ƒç”¨ï¼Œè‡ªç„¶å°±é‡‡ç”¨äº†é»˜è®¤ç»‘å®šã€‚

---

é‚£ä¹ˆæ›´å¾®å¦™çš„ä¸€ç§æƒ…å†µå°±æ˜¯é€šè¿‡å‚æ•°ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œæ¯”å¦‚

```js
function doFoo(fn) {
  // fn å…¶å®å¼•ç”¨çš„æ˜¯ foo
  fn(); // <-- è°ƒç”¨ä½ç½®!
}
doFoo(obj.foo);
```

å‚æ•°ä¼ é€’æ˜¯ä¸€ç§éšå¼èµ‹å€¼ã€‚
ä¹Ÿå°±æ˜¯è¯´è·Ÿä¸Šé¢çš„èµ‹å€¼æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œç»“æœä¹Ÿå°±ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸¢å¤±äº†ã€‚

ä¸è¦åœï¼Œè¿˜æ²¡å®Œï¼Œè¿›è€Œåˆå¼•å‡ºäº†å¯¹ setTimeout çš„æ€è€ƒã€‚

```js
setTimeout( obj.foo, 100 ); // "oops, global"
JavaScript ç¯å¢ƒä¸­å†…ç½®çš„ setTimeout()
å‡½æ•°å®ç°å’Œä¸‹é¢çš„ä¼ªä»£ç ç±»ä¼¼:
function setTimeout(fn,delay) {
	// ç­‰å¾… delay æ¯«ç§’
	fn(); // <-- è°ƒç”¨ä½ç½®!
}
```

è¿™ä¸å°±æ˜¯ setTimeout ä¸ºå•¥ä¸¢å¤± this çš„åŸå› äº†ã€‚ã€‚ã€‚ã€‚
_~`ä½†æœ‰ä¸€è¯´ä¸€ï¼Œthisä¸¢å¤±ç¡®å®ç»™äººä¸€ç§å¥‡æ€ªä¹‹æ„Ÿï¼Œä¸»è¦è¿˜æ˜¯è¯´setTimeoutè¿™ç§apiå…·ä½“å®ç°ä¸äº†è§£ï¼Œé€ æˆçš„é—®é¢˜éš¾ä»¥ä¸‹æ‰‹ï¼Œäº†è§£äº†å¤§æ¦‚çš„å®ç°åŸç†ä¹‹åï¼Œé—®é¢˜ä¹Ÿå°±è¿åˆƒè€Œè§£äº†ï¼Œä½†è¿™å°±æœ‰ä¸ªæ€è€ƒï¼Œä½¿ç”¨ä¸€ä¸ªapié™¤äº†çŸ¥é“æ€ä¹ˆä½¿ç”¨ä»¥å¤–è¿˜æœ‰å¿…è¦çŸ¥é“å…·ä½“å®ç°ä¹ˆï¼Ÿå…·ä½“çš„å®ç°ç”¨å¾—ç€æš´éœ²ç»™æˆ‘ä¸€ä¸ªæ™®é€šçš„ä½¿ç”¨è€…ä¹ˆï¼Ÿæˆ‘çš„æƒ³æ³•å°±æ˜¯ä¸€ä¸ªapiåœ¨ä½¿ç”¨çš„æ—¶å€™å°½å¯èƒ½çš„æ²¡å•¥é—®é¢˜ï¼Œæ¯”å¦‚setTimeoutä¸¢å¤±thisçš„é—®é¢˜ï¼Œèƒ½ä¸èƒ½â€œé™é»˜è§£å†³äº†â€ï¼Œå¯èƒ½æœ‰ç‚¹æç«¯äº†ï¼Œä½†ä¹Ÿç®—ä¸€ç§è¿›åŒ–çš„æ–¹å‘ï¼Œç°åœ¨çš„ç®­å¤´å‡½æ•°å°±æ˜¯å¡«è¡¥äº†è¿™ä¸ªç©ºï¼Œè®©ä½ ä¸è¦å»è€ƒè™‘äº†ï¼Œä½†é—®é¢˜è¿˜æ˜¯é‚£æ ·ï¼Œæˆ‘è§‰å¾—æœ€å¥½å°±æ˜¯setTimeoutå†…éƒ¨ç›´æ¥å­˜å‚¨å…¶è°ƒç”¨ä½ç½®çš„thisç»™è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œä½†å¯èƒ½è‡³ä»Šå®ƒä¸å»æ”¹ï¼Œä¿æŒè¿™ä¸ªâ€œåŸç”Ÿæ€â€ï¼Œåº”è¯¥æ˜¯æœ‰å…¶æ·±æ„`~_

æè¿°ä¸€ä¸‹å®ç°éšç§ç»‘å®šçš„è¿‡ç¨‹ï¼šä¸€ä¸ªå¯¹è±¡å†…éƒ¨åŒ…å«ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„å±æ€§,å¹¶é€šè¿‡è¿™ä¸ªå±æ€§é—´æ¥å¼•ç”¨å‡½æ•°,ä»è€ŒæŠŠ this é—´æ¥(éšå¼)ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚

## 2.2.3 æ˜¾å¼ç»‘å®š

é€šè¿‡é’ˆå¯¹çš„éšç§ç»‘å®šçš„å®ç°æè¿°ï¼Œå¼•å‡ºäº†ä¸€ä¸ªæƒ³æ³•ï¼Œå¦‚æœä¸æƒ³åœ¨å¯¹è±¡å†…éƒ¨åŒ…å«å‡½æ•°å¼•ç”¨=ã€‹ä¸æƒ³åŒ…å«äº†ï¼Œæœ‰åŠæ³•ä¹ˆï¼Ÿ
å½“ç„¶ï¼Œä½¿ç”¨ call å’Œ applyã€‚
è€Œä¸”ä¹¦ä¸Šå¼ºè°ƒäº†

> ä¸¥æ ¼æ¥è¯´,JavaScript çš„å®¿ä¸»ç¯å¢ƒæœ‰æ—¶ä¼šæä¾›ä¸€äº›éå¸¸ç‰¹æ®Šçš„å‡½æ•°,å®ƒä»¬å¹¶æ²¡æœ‰è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ä½†æ˜¯è¿™æ ·çš„å‡½æ•°éå¸¸ç½•è§,JavaScript æä¾›çš„ç»å¤§å¤šæ•°å‡½æ•°ä»¥åŠä½ è‡ªå·±åˆ›å»ºçš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨ call(..) å’Œ apply(..) æ–¹æ³•ã€‚

soï¼Œæ”¾å¿ƒç”¨å§ã€‚

---

**è£…ç®±**:å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªåŸå§‹å€¼(å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹æˆ–è€…æ•°å­—ç±»å‹)æ¥å½“ä½œ this çš„ç»‘å®šå¯¹è±¡,è¿™ä¸ªåŸå§‹å€¼ä¼šè¢«è½¬æ¢æˆå®ƒçš„å¯¹è±¡å½¢å¼(ä¹Ÿå°±æ˜¯ new String(..)ã€new Boolean(..) æˆ–è€… new Number(..)) ã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œè£…ç®±â€ ã€‚

_~`å…¶å®ä½ å¯ä»¥è¯•è¯•åœ¨consoleä¸­å®šä¸€ä¸ªåŸå§‹å€¼ï¼Œç„¶åçœ‹ä¸‹éšå¼åŸå‹`~_
]![[Pasted image 20210502122313.png]]
ä¼°è®¡è¿™å°±æ˜¯è£…ç®±äº†ï¼Œæœ‰ç§æŒ‰éœ€çš„æ„æ€äº†ã€‚ã€‚ã€‚ã€‚

---

ä½†æ˜¯ä¹¦ä¸Šè¯´äº†ï¼š

> å¯æƒœ,æ˜¾å¼ç»‘å®šä»ç„¶æ— æ³•è§£å†³æˆ‘ä»¬ä¹‹å‰æå‡ºçš„ä¸¢å¤±ç»‘å®šé—®é¢˜ã€‚

æ€è€ƒä¸€ä¸‹ï¼Œä¸ºå•¥è¿™ä¹ˆè¯´å‘¢ï¼Œâ€œä¸¢å¤±ç»‘å®šé—®é¢˜â€ç©¶ç«Ÿæ˜¯éœ€è¦è§£å†³ä»€ä¹ˆï¼Ÿ
_~`æˆ‘è§‰å¾—å¥¥ï¼Œé€šè¿‡åˆ†ææ¯”è¾ƒéšå¼å’Œæ˜¾å¼ç»‘å®šï¼Œå¾—å‡ºå®é™…ä¸Šè¦è§£å†³çš„æ˜¯ï¼šå°†ä¸€ä¸ªå·²ç»ç»‘å®šå¥½çš„å‡½æ•°é€šè¿‡ä¸€ä¸ªå˜é‡è¿›è¡Œå¼•ç”¨å¹¶è°ƒç”¨ä¹‹åï¼Œä¾ç„¶èƒ½ä¿æŒä¹‹å‰ç»‘å®šå¥½çš„çŠ¶æ€ã€‚é‚£ä¹ˆä¹Ÿå°±å¼•å‡ºäº†æ¥ä¸‹æ¥è¦è®²çš„çš„ç¡¬ç»‘å®š-bindç­‰åŠæ³•`~_

---

- ç¡¬ç»‘å®šï¼šæ˜¾å¼çš„å¼ºåˆ¶ç»‘å®šåˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œbind
- å‡½æ•°æä¾›çš„ context çš„å‚æ•°ï¼Œæ¯”å¦‚ foreach çš„ç¬¬äºŒå‚æ•°ï¼Œå…¶å®å†…éƒ¨ç”¨çš„å°±æ˜¯ call å’Œ apply

## 2.2.4 new ç»‘å®š

> JavaScript ä¹Ÿæœ‰ä¸€ä¸ª new æ“ä½œç¬¦,ä½¿ç”¨æ–¹æ³•çœ‹èµ·æ¥ä¹Ÿå’Œé‚£äº›é¢å‘ç±»çš„è¯­è¨€ä¸€æ ·,ç»å¤§å¤šæ•°å¼€å‘è€…éƒ½è®¤ä¸º JavaScript ä¸­ new çš„æœºåˆ¶ä¹Ÿå’Œé‚£äº›è¯­è¨€ä¸€æ ·ã€‚ç„¶è€Œ,JavaScript ä¸­ new çš„æœºåˆ¶å®é™…ä¸Šå’Œé¢å‘ç±»çš„è¯­è¨€å®Œå…¨ä¸åŒã€‚

js ä¸­éœ€è¦é‡æ–°å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š

> js ä¸­ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸€äº›ä½¿ç”¨ new æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä»¬å¹¶ä¸ä¼šå±äºæŸä¸ªç±»,ä¹Ÿä¸ä¼šå®ä¾‹åŒ–ä¸€ä¸ªç±»ã€‚å®é™…ä¸Š, å®ƒä»¬ç”šè‡³éƒ½ä¸èƒ½è¯´æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ç±»å‹,å®ƒä»¬åªæ˜¯è¢« new æ“ä½œç¬¦è°ƒç”¨çš„æ™®é€šå‡½æ•°è€Œå·²=ã€‹å°±æ˜¯ä¸€ä¸ªè¢« new è°ƒç”¨çš„å‡½æ•°

å®é™…ä¸Šå¹¶ä¸å­˜åœ¨æ‰€è°“çš„â€œæ„é€ å‡½æ•°â€ ,åªæœ‰å¯¹äºå‡½æ•°çš„â€œæ„é€ è°ƒç”¨â€

1. åˆ›å»º(æˆ–è€…è¯´æ„é€ )ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚
2. è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ [[åŸå‹]] è¿æ¥ã€‚
3. è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„ thisã€‚
4. å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡,é‚£ä¹ˆ new è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚

# 2.3 ä¼˜å…ˆçº§

new>ç¡¬ç»‘å®š>éšå¼ç»‘å®š>é»˜è®¤ç»‘å®š

# 2.4 ç»‘å®šä¾‹å¤–

## 2.4.1 è¢«å¿½ç•¥çš„ this

bind(..) å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒæŸ¯é‡ŒåŒ–(é¢„å…ˆè®¾ç½®ä¸€äº›å‚æ•°) ,è¿™ç§æ–¹æ³•æœ‰æ—¶éå¸¸æœ‰ç”¨
å¦‚æœå‡½æ•°å¹¶ä¸å…³å¿ƒ this çš„è¯,ä½ ä»ç„¶éœ€è¦ä¼ å…¥ä¸€ä¸ªå ä½å€¼

**æ›´å®‰å…¨çš„ this**ï¼šå¦‚æœå‡½æ•°å¹¶ä¸å…³å¿ƒ this çš„è¯,ä½ ä»ç„¶éœ€è¦ä¼ å…¥ä¸€ä¸ªå ä½å€¼

## 2.4.2 é—´æ¥å¼•ç”¨

ä¹‹å‰è°ˆè¿‡çš„é€šè¿‡ç›´æ¥èµ‹å€¼æˆ–è€…ä¼ å‚æ•°è¿™ç§é—´æ¥èµ‹å€¼çš„éƒ½å±äºæ­¤ç±»æƒ…å†µ

## 2.4.3 è½¯ç»‘å®š

ç¡¬ç»‘å®šä¼šæœ‰äº›é—®é¢˜ï¼š
é—®é¢˜åœ¨äº,ç¡¬ç»‘å®šä¼š**å¤§å¤§**é™ä½å‡½æ•°çš„çµæ´»æ€§,ä½¿ç”¨ç¡¬ç»‘å®šä¹‹åå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹ thisã€‚

```js
if (!Function.prototype.softBind) {
  Function.prototype.softBind = function (obj) {
    var fn = this; // æ•è·æ‰€æœ‰ curried å‚æ•°
    var curried = [].slice.call(arguments, 1);
    var bound = function () {
      return fn.apply(
        !this || this === (window || global) ? obj : this,
        curried.concat.apply(curried, arguments)
      );
    };
    bound.prototype = Object.create(fn.prototype);
    return bound;
  };
}
```

åœ¨ Function çš„åŸå‹ä¸Šè¿½åŠ äº†ä¸€ä¸ª softBind çš„å‡½æ•°
å°±æ˜¯ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ä½œä¸ºé»˜è®¤ç»‘å®šçš„å¯¹è±¡ï¼Œé˜²æ­¢é»˜è®¤ç»‘å®š window æˆ–è€… undifindï¼Œè¿™ç§æƒ…å†µå°±è·Ÿ bind ç›¸åŒï¼Œç„¶åä¾ç„¶ä¿ç•™äº†å‡½æ•°çš„çš„éšå¼å’Œæ˜¾å¼ç»‘å®šä¿®æ”¹ this çš„èƒ½åŠ›

# 2.5 this è¯æ³•

> ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ this çš„å››ç§æ ‡å‡†è§„åˆ™,è€Œæ˜¯æ ¹æ®å¤–å±‚(å‡½æ•°**æˆ–è€…**å…¨å±€)ä½œç”¨åŸŸæ¥å†³å®š thisã€‚

`foo() å†…éƒ¨åˆ›å»ºçš„ç®­å¤´å‡½æ•°ä¼šæ•è·è°ƒç”¨æ—¶ foo() çš„ this`
`ç®­å¤´å‡½æ•°çš„ç»‘å®šæ— æ³•è¢«ä¿®æ”¹ã€‚ (new ä¹Ÿä¸è¡Œ!)`

# 2.6 å°ç»“

æ­£å¸¸çš„å‡½æ•°è°ƒç”¨ä½¿ç”¨å››è§„åˆ™

æ³¨æ„ä¸€äº›è°ƒç”¨æ— æ„ä¸­ä½¿ç”¨äº†é»˜è®¤è§„åˆ™çš„æƒ…å†µï¼šä¸»è¦å°±æ˜¯èµ‹å€¼çš„æƒ…å†µ

å¿½ç•¥ this æœ€å®‰å…¨çš„æ–¹æ³•æ˜¯ä¼ ä¸€ä¸ª Object.create.(null)ï¼Œä»¥ä¿æŠ¤ window ä¸è¢«ç¯¡æ”¹

es6 ä¸ä½¿ç”¨å››æ¡è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚å‡½æ•°è°ƒç”¨çš„ this æ¥ç¡®å®šç»‘å®šï¼ŒES6 ä¹‹å‰ç”¨ self = this æ¥å®ç°ï¼Œæœºåˆ¶å‡ ä¹ä¸€è‡´
